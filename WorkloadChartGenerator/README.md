# Генератор Графиков Нагрузки

Это приложение генерирует графики рабочей нагрузки на основе входных данных из JSON-файла. Оно обрабатывает данные, позволяет сглаживать линии графика с помощью скользящего среднего и сохраняет результирующий график как изображение.

---

## Возможности

| Функция                 | Описание                                                                                                |
|-------------------------|------------------------------------------------------------------------------------------------------------|
| **Загрузка данных**     | Загружает данные о рабочей нагрузке из указанного JSON-файла.                                              |
| **Агрегация данных**    | Агрегирует данные по дате и проекту.                                                                       |
| **Сглаживание данных**  | Применяет скользящее среднее для сглаживания колебаний рабочей нагрузки (настраиваемый размер окна).       |
| **Генерация графика**   | Создает график процентов рабочей нагрузки по времени для разных проектов.                                  |
| **Настройка графика**   | Отображает даты в формате ММ-ДД на графике.                                                                |
| **Сохранение графика**  | Сохраняет сгенерированный график как PNG-файл, по умолчанию в подкаталоге `charts/`.                       |
| **Логирование**         | Использует модуль `logging` Python для вывода информации, предупреждений и ошибок.                          |
| **Конфигурация**        | Год для обработки данных и размер окна сглаживания настраиваются при создании объекта `WorkloadChartGenerator`. |

---

## Зависимости

- Python 3.7+ (или другая версия, используемая в проекте)
- pandas
- matplotlib

---

## Структура проекта

```
WorkloadChartGenerator/
├── .venv/                    # Директория виртуального окружения
├── charts/                   # Директория по умолчанию для сохранения графиков
├── workloadChartGenerator.py # Основной скрипт приложения
├── reports.json              # Пример/входной файл данных (формат JSON)
├── requirements.txt          # Зависимости Python-пакетов
└── README.md                 # Этот файл
```

---

## Быстрый старт

1.  **Клонируйте репозиторий (если применимо) или убедитесь, что у вас есть файлы проекта.**

2.  **Перейдите в директорию проекта:**
    ```bash
    cd путь/к/WorkloadChartGenerator
    ```

3.  **Создайте и активируйте виртуальное окружение:**
    ```bash
    # Создание виртуального окружения (например, с именем .venv)
    python -m venv .venv

    # Активация в Windows
    .\.venv\Scripts\activate

    # Активация в macOS/Linux
    # source .venv/bin/activate
    ```

4.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

5.  **Запустите приложение:**
    ```bash
    python workloadChartGenerator.py
    ```
    Это обработает `reports.json`, выведет сводку в консоль (лог) и сохранит изображение графика в директории `charts/`.

---

## Детали использования

Основной скрипт `workloadChartGenerator.py` определяет класс `WorkloadChartGenerator`, который обрабатывает основную логику.

### Инициализация

Класс `WorkloadChartGenerator` инициализируется с параметрами:
- `json_path` (str): Путь к входному JSON-файлу данных.
- `year` (int, опционально, по умолчанию: 2025): Год, который будет ассоциирован с датами в JSON-файле (которые в формате ММ-ДД).
- `rolling_window` (int, опционально, по умолчанию: 3): Размер окна для сглаживания данных с помощью скользящего среднего. Установите 1 или 0 для отключения сглаживания.

Пример из скрипта:
```python
gen = WorkloadChartGenerator("reports.json", year=2025, rolling_window=3)
```

### Основные методы

- **`load()`**: Загружает данные из `json_path`.
- **`aggregate()`**: Обрабатывает и агрегирует загруженные данные. Применяет сглаживание, если `rolling_window` > 1.
- **`show_summary(n=5, original=False)`**: Выводит в лог сводку (опционально исходных или сглаженных) данных.
- **`plot(save_path=None, show_plot=False)`**: Генерирует и сохраняет график. Возвращает путь к сохраненному графику. Если `save_path` не указан, сохраняет в подкаталог `charts/` с именем файла, включающим временную метку. `show_plot=True` отобразит график в окне (в настоящее время установлено `False` в основном скрипте).

---

## Примечание по конфигурации

- Файл `reports.json` должен содержать даты в строковом формате "ММ-ДД".
- Скрипт `workloadChartGenerator.py` в настоящее время обрабатывает эти даты, связывая их с параметром `year` (по умолчанию 2025), указанным при создании объекта `WorkloadChartGenerator`.

---


*Автор: Валерия Беляева, 2025 г.*